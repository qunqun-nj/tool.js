/*!
 * 💡 tool.js - 💡 前端常用的工具类方法汇总。
 * git+https://github.com/hai2007/tool.js.git
 *
 * author hai2007 < https://hai2007.gitee.io/sweethome >
 *
 * version 0.3.0
 *
 * Copyright (c) 2020-present hai2007 走一步，再走一步。
 * Released under the MIT license
 *
 * Date:Wed Nov 18 2020 16:54:37 GMT+0800 (GMT+08:00)
 */
(function(){"use strict";function n(e){"@babel/helpers - typeof";if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){n=function(e){return typeof e}}else{n=function(e){return e&&typeof Symbol==="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e}}return n(e)}var l=[];var o=13;var i=400;var u=null;function e(t,e,r){var a={timer:function e(t,r,n){if(!t){throw new Error("Tick is required!")}r=r||i;var o=(new Date).valueOf()+"_"+(Math.random()*1e3).toFixed(0);l.push({id:o,createTime:new Date,tick:t,duration:r,callback:n});a.start();return o},start:function e(){if(!u){u=setInterval(a.tick,o)}},tick:function e(){var t,r,e,n,o,i,u,f=l;l=[];l.length=0;for(r=0;r<f.length;r++){o=f[r];t=o.createTime;e=o.tick;i=o.duration;n=o.callback;u=(+new Date-t)/i;u=u>1?1:u;e(u);if(u<1&&o.id){l.push(o)}else if(n){n(u)}}if(l.length<=0){a.stop()}},stop:function e(){if(u){clearInterval(u);u=null}}};var n=a.timer(function(e){t(e)},e,r);return function(){var e;for(e in l){if(l[e].id==n){l[e].id=undefined;return}}}}function f(e,t,r,n){n=n||0;var o=Math.sqrt(t*t+r*r+n*n);return[1,0,0,0,0,1,0,0,0,0,1,0,t*e/o,r*e/o,n*e/o,1]}function s(e){var t=Math.sin(e),r=Math.cos(e);return[r,t,0,0,-t,r,0,0,0,0,1,0,0,0,0,1]}function a(e,t,r,n,o,i){n=n||0;o=o||0;i=i||0;return[e,0,0,0,0,t,0,0,0,0,r,0,n-n*e,o-o*t,i-i*r,1]}function b(e,t,r,n,o,i){if(typeof e==="number"&&typeof t==="number"){if(typeof r!=="number"){r=0;n=e;o=t;i=1}else if(typeof n!=="number"||typeof o!=="number"||typeof i!=="number"){n=e;o=t;i=r;e=0;t=0;r=0}if(e==n&&t==o&&r==i)throw new Error("It's not a legitimate ray!");var u=Math.sqrt((n-e)*(n-e)+(o-t)*(o-t)),f=u!=0?(o-t)/u:1,a=u!=0?(n-e)/u:0,l=(n-e)*a+(o-t)*f,c=i-r,s=Math.sqrt(l*l+c*c),b=s!=0?c/s:1,v=s!=0?l/s:0;return[[f,b*a,a*v,0,-a,f*b,f*v,0,0,-v,b,0,t*a-e*f,r*v-e*a*b-t*f*b,-e*a*v-t*f*v-r*b,1],[f,-a,0,0,b*a,b*f,-v,0,a*v,f*v,b,0,e,t,r,1]]}else{throw new Error("a1 and b1 is required!")}}var v=function e(t,r){var n=[];for(var o=0;o<4;o++){for(var i=0;i<r.length/4;i++){n[i*4+o]=t[o]*r[i*4]+t[o+4]*r[i*4+1]+t[o+8]*r[i*4+2]+t[o+12]*r[i*4+3]}}return n};function t(e){var l=e||[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];var c={move:function e(t,r,n,o){l=v(f(t,r,n,o),l);return c},rotate:function e(t,r,n,o,i,u,f){var a=b(r,n,o,i,u,f);l=v(v(v(a[1],s(t)),a[0]),l);return c},scale:function e(t,r,n,o,i,u){l=v(a(t,r,n,o,i,u),l);return c},multiply:function e(t,r){l=r?v(l,t):v(t,l);return c},use:function e(t,r,n,o){n=n||0;o=o||1;var i=v(l,[t,r,n,o]);i[0]=+i[0].toFixed(7);i[1]=+i[1].toFixed(7);i[2]=+i[2].toFixed(7);i[3]=+i[3].toFixed(7);return i},value:function e(){return l}};return c}function r(e,t){for(var r in t){try{e[r]=t[r]}catch(e){throw new Error("Illegal property value！")}}return e}function c(a){a=r({u:.5},a);var l,c,s;var b=function e(t){if(l){var r=(t-c)/(s-c),n=r*r,o=r*n;var i=o*l[0]+n*l[1]+r*l[2]+l[3];return i*(s-c)}else throw new Error("You shoud first set the position!")};b.setP=function(e,t,r,n,o,i){if(e<r){c=e;s=r;var u=a.u*o,f=a.u*i;t/=r-e;n/=r-e;l=[2*t-2*n+u+f,3*n-3*t-2*u-f,u,t]}else throw new Error("The point x-position should be increamented!");return b};return b}function y(e){var t=n(e);return e!=null&&(t==="object"||t==="function")}var d=Object.prototype.toString;function p(e){if(e==null){return e===undefined?"[object Undefined]":"[object Null]"}return d.call(e)}function m(e){return e===true||e===false||e!==null&&n(e)==="object"&&p(e)==="[object Boolean]"}function j(e){return typeof e==="number"||e!==null&&n(e)==="object"&&p(e)==="[object Number]"}function h(e){var t=n(e);return t==="string"||t==="object"&&e!=null&&!Array.isArray(e)&&p(e)==="[object String]"}function g(e){var t=n(e);return t==="symbol"||t==="object"&&e!==null&&p(e)==="[object Symbol]"}function w(e){if(!y(e)){return false}var t=p(e);return t==="[object Function]"||t==="[object AsyncFunction]"||t==="[object GeneratorFunction]"||t==="[object Proxy]"}function O(e){if(e===null||n(e)!=="object"||p(e)!="[object Object]"){return false}if(Object.getPrototypeOf(e)===null){return true}var t=e;while(Object.getPrototypeOf(t)!==null){t=Object.getPrototypeOf(t)}return Object.getPrototypeOf(e)===t}function x(e){if(e===null||n(e)!=="object"){return false}var t=p(e);return t==="[object Error]"||t==="[object DOMException]"||typeof e.message==="string"&&typeof e.name==="string"&&!O(e)}function T(e){var t=[y(e)?"Object":"Basic","*"];if(e===undefined)t[1]="Undefined";else if(e===null)t[1]="Null";else if(m(e))t[1]="Boolean";else if(j(e))t[1]="Number";else if(h(e))t[1]="String";else if(g(e))t[1]="Symbol";else if(w(e))t[1]="Function";else if(Array.isArray(e))t[1]="Array";else if(x(e))t[1]="Error";else if(O(e))t[1]="Plain";else{if(n(e)==="object"){if(e.nodeType===3)t[1]="Text";else if(e.nodeType===1||e.nodeType===9||e.nodeType===11)t[1]="Element";else if(e.nodeType===2)t[1]="Attribute";else if(e.nodeType===8)t[1]="Comment"}}return t}var E=function e(t,r){return r!==null&&n(r)==="object"&&t.indexOf(r.nodeType)>-1&&!O(r)};var S=function e(t){return t===undefined};var A=function e(t){return t===null};var F=m;var M=j;var P=h;var k=g;var N=w;var q=function e(t){return Array.isArray(t)};var B=x;var D=O;var I=function e(t){return E([1,9,11],t)};var U=function e(t){return E([2],t)};var C=function e(t){return E([3],t)};var G=function e(t){return E([8],t)};var H={animation:e,Matrix4:t,Hermite:c,getType:T,isUndefined:S,isNull:A,isBoolean:F,isNumber:M,isString:P,isSymbol:k,isFunction:N,isArray:q,isError:B,isPlainObject:D,isElement:I,isAttribute:U,isText:C,isComment:G};if((typeof module==="undefined"?"undefined":n(module))==="object"&&n(module.exports)==="object"){module.exports=H}else{window.tool=H}})();
(function(){"use strict";function r(t){"@babel/helpers - typeof";if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){r=function(t){return typeof t}}else{r=function(t){return t&&typeof Symbol==="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t}}return r(t)}var c=[];var o=13;var i=400;var u=null;function t(r,t,e){var f={timer:function t(r,e,n){if(!r){throw new Error("Tick is required!")}e=e||i;var o=(new Date).valueOf()+"_"+(Math.random()*1e3).toFixed(0);c.push({id:o,createTime:new Date,tick:r,duration:e,callback:n});f.start();return o},start:function t(){if(!u){u=setInterval(f.tick,o)}},tick:function t(){var r,e,t,n,o,i,u,a=c;c=[];c.length=0;for(e=0;e<a.length;e++){o=a[e];r=o.createTime;t=o.tick;i=o.duration;n=o.callback;u=(+new Date-r)/i;u=u>1?1:u;t(u);if(u<1&&o.id){c.push(o)}else if(n){n(u)}}if(c.length<=0){f.stop()}},stop:function t(){if(u){clearInterval(u);u=null}}};var n=f.timer(function(t){r(t)},t,e);return function(){var t;for(t in c){if(c[t].id==n){c[t].id=undefined;return}}}}function a(t,r,e,n){n=n||0;var o=Math.sqrt(r*r+e*e+n*n);return[1,0,0,0,0,1,0,0,0,0,1,0,r*t/o,e*t/o,n*t/o,1]}function s(t){var r=Math.sin(t),e=Math.cos(t);return[e,r,0,0,-r,e,0,0,0,0,1,0,0,0,0,1]}function f(t,r,e,n,o,i){n=n||0;o=o||0;i=i||0;return[t,0,0,0,0,r,0,0,0,0,e,0,n-n*t,o-o*r,i-i*e,1]}function v(t,r,e,n,o,i){if(typeof t==="number"&&typeof r==="number"){if(typeof e!=="number"){e=0;n=t;o=r;i=1}else if(typeof n!=="number"||typeof o!=="number"||typeof i!=="number"){n=t;o=r;i=e;t=0;r=0;e=0}if(t==n&&r==o&&e==i)throw new Error("It's not a legitimate ray!");var u=Math.sqrt((n-t)*(n-t)+(o-r)*(o-r)),a=u!=0?(o-r)/u:1,f=u!=0?(n-t)/u:0,c=(n-t)*f+(o-r)*a,l=i-e,s=Math.sqrt(c*c+l*l),v=s!=0?l/s:1,d=s!=0?c/s:0;return[[a,v*f,f*d,0,-f,a*v,a*d,0,0,-d,v,0,r*f-t*a,e*d-t*f*v-r*a*v,-t*f*d-r*a*d-e*v,1],[a,-f,0,0,v*f,v*a,-d,0,f*d,a*d,v,0,t,r,e,1]]}else{throw new Error("a1 and b1 is required!")}}var d=function t(r,e){var n=[];for(var o=0;o<4;o++){for(var i=0;i<e.length/4;i++){n[i*4+o]=r[o]*e[i*4]+r[o+4]*e[i*4+1]+r[o+8]*e[i*4+2]+r[o+12]*e[i*4+3]}}return n};function e(t){var c=t||[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];var l={move:function t(r,e,n,o){c=d(a(r,e,n,o),c);return l},rotate:function t(r,e,n,o,i,u,a){var f=v(e,n,o,i,u,a);c=d(d(d(f[1],s(r)),f[0]),c);return l},scale:function t(r,e,n,o,i,u){c=d(f(r,e,n,o,i,u),c);return l},multiply:function t(r,e){c=e?d(c,r):d(r,c);return l},use:function t(r,e,n,o){n=n||0;o=o||1;var i=d(c,[r,e,n,o]);i[0]=+i[0].toFixed(7);i[1]=+i[1].toFixed(7);i[2]=+i[2].toFixed(7);i[3]=+i[3].toFixed(7);return i},value:function t(){return c}};return l}function n(t,r){for(var e in r){try{t[e]=r[e]}catch(t){throw new Error("Illegal property value！")}}return t}function l(f){f=n({u:.5},f);var c,l,s;var v=function t(r){if(c){var e=(r-l)/(s-l),n=e*e,o=e*n;var i=o*c[0]+n*c[1]+e*c[2]+c[3];return i*(s-l)}else throw new Error("You shoud first set the position!")};v.setP=function(t,r,e,n,o,i){if(t<e){l=t;s=e;var u=f.u*o,a=f.u*i;r/=e-t;n/=e-t;c=[2*r-2*n+u+a,3*n-3*r-2*u-a,u,r]}else throw new Error("The point x-position should be increamented!");return v};return v}var m={animation:t,Matrix4:e,Hermite:l};if((typeof module==="undefined"?"undefined":r(module))==="object"&&r(module.exports)==="object"){module.exports=m}else{window.tool=m}})();
/*!
 * 💡 tool.js - 💡 前端常用的工具类方法汇总。
 * git+https://github.com/hai2007/tool.js.git
 *
 * author 你好2007 < https://hai2007.gitee.io/sweethome >
 *
 * version 0.5.0
 *
 * Copyright (c) 2020-present hai2007 走一步，再走一步。
 * Released under the MIT license
 *
 * Date:Sun Jan 10 2021 21:42:51 GMT+0800 (GMT+08:00)
 */
(function(){"use strict";var l=[];var o=13;var i=400;var u=null;function e(t,e,n){var a={timer:function(e,t,n){if(!e){throw new Error("Tick is required!")}t=t||i;var r=(new Date).valueOf()+"_"+(Math.random()*1e3).toFixed(0);l.push({id:r,createTime:new Date,tick:e,duration:t,callback:n});a.start();return r},start:function(){if(!u){u=setInterval(a.tick,o)}},tick:function(){var e,t,n,r,o,i,u,f=l;l=[];l.length=0;for(t=0;t<f.length;t++){o=f[t];e=o.createTime;n=o.tick;i=o.duration;r=o.callback;u=(+new Date-e)/i;u=u>1?1:u;n(u);if(u<1&&o.id){l.push(o)}else if(r){r(u)}}if(l.length<=0){a.stop()}},stop:function(){if(u){clearInterval(u);u=null}}};var r=a.timer(function(e){t(e)},e,n);return function(){var e;for(e in l){if(l[e].id==r){l[e].id=undefined;return}}}}function f(e,t,n,r){r=r||0;var o=Math.sqrt(t*t+n*n+r*r);return[1,0,0,0,0,1,0,0,0,0,1,0,t*e/o,n*e/o,r*e/o,1]}function c(e){var t=Math.sin(e),n=Math.cos(e);return[n,t,0,0,-t,n,0,0,0,0,1,0,0,0,0,1]}function s(e,t,n,r,o,i){r=r||0;o=o||0;i=i||0;return[e,0,0,0,0,t,0,0,0,0,n,0,r-r*e,o-o*t,i-i*n,1]}function d(e,t,n,r,o,i){if(typeof e==="number"&&typeof t==="number"){if(typeof n!=="number"){n=0;r=e;o=t;i=1}else if(typeof r!=="number"||typeof o!=="number"||typeof i!=="number"){r=e;o=t;i=n;e=0;t=0;n=0}if(e==r&&t==o&&n==i)throw new Error("It's not a legitimate ray!");var u=Math.sqrt((r-e)*(r-e)+(o-t)*(o-t)),f=u!=0?(o-t)/u:1,a=u!=0?(r-e)/u:0,l=(r-e)*a+(o-t)*f,c=i-n,s=Math.sqrt(l*l+c*c),d=s!=0?c/s:1,v=s!=0?l/s:0;return[[f,d*a,a*v,0,-a,f*d,f*v,0,0,-v,d,0,t*a-e*f,n*v-e*a*d-t*f*d,-e*a*v-t*f*v-n*d,1],[f,-a,0,0,d*a,d*f,-v,0,a*v,f*v,d,0,e,t,n,1]]}else{throw new Error("a1 and b1 is required!")}}var v=function(e,t){var n=[];for(var r=0;r<4;r++)for(var o=0;o<t.length/4;o++)n[o*4+r]=e[r]*t[o*4]+e[r+4]*t[o*4+1]+e[r+8]*t[o*4+2]+e[r+12]*t[o*4+3];return n};function t(e){var a=e||[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];var l={move:function(e,t,n,r){a=v(f(e,t,n,r),a);return l},rotate:function(e,t,n,r,o,i,u){var f=d(t,n,r,o,i,u);a=v(v(v(f[1],c(e)),f[0]),a);return l},scale:function(e,t,n,r,o,i){a=v(s(e,t,n,r,o,i),a);return l},multiply:function(e,t){a=t?v(a,e):v(e,a);return l},use:function(e,t,n,r){n=n||0;r=r||1;var o=v(a,[e,t,n,r]);o[0]=+o[0].toFixed(7);o[1]=+o[1].toFixed(7);o[2]=+o[2].toFixed(7);o[3]=+o[3].toFixed(7);return o},value:function(){return a}};return l}function n(e,t){for(var n in t)try{e[n]=t[n]}catch(e){throw new Error("Illegal property value！")}return e}function r(a){a=n({u:.5},a);var l,c,s;var d=function(e){if(l){var t=(e-c)/(s-c),n=t*t,r=t*n;var o=r*l[0]+n*l[1]+t*l[2]+l[3];return o*(s-c)}else throw new Error("You shoud first set the position!")};d.setP=function(e,t,n,r,o,i){if(e<n){c=e;s=n;var u=a.u*o,f=a.u*i;t/=n-e;r/=n-e;l=[2*t-2*r+u+f,3*r-3*t-2*u-f,u,t]}else throw new Error("The point x-position should be increamented!");return d};return d}function a(e){var t=typeof e;return e!=null&&(t==="object"||t==="function")}var p=Object.prototype.toString;function h(e){if(e==null){return e===undefined?"[object Undefined]":"[object Null]"}return p.call(e)}function y(e){return e===true||e===false||e!==null&&typeof e==="object"&&h(e)==="[object Boolean]"}function b(e){return typeof e==="number"||e!==null&&typeof e==="object"&&h(e)==="[object Number]"}function g(e){var t=typeof e;return t==="string"||t==="object"&&e!=null&&!Array.isArray(e)&&h(e)==="[object String]"}function m(e){var t=typeof e;return t==="symbol"||t==="object"&&e!==null&&h(e)==="[object Symbol]"}function w(e){if(!a(e)){return false}var t=h(e);return t==="[object Function]"||t==="[object AsyncFunction]"||t==="[object GeneratorFunction]"||t==="[object Proxy]"}function j(e){if(e===null||typeof e!=="object"||h(e)!="[object Object]"){return false}if(Object.getPrototypeOf(e)===null){return true}var t=e;while(Object.getPrototypeOf(t)!==null){t=Object.getPrototypeOf(t)}return Object.getPrototypeOf(e)===t}function E(e){if(e===null||typeof e!=="object"){return false}var t=h(e);return t==="[object Error]"||t==="[object DOMException]"||typeof e.message==="string"&&typeof e.name==="string"&&!j(e)}function x(e){var t=[a(e)?"Object":"Basic","*"];if(e===undefined)t[1]="Undefined";else if(e===null)t[1]="Null";else if(y(e))t[1]="Boolean";else if(b(e))t[1]="Number";else if(g(e))t[1]="String";else if(m(e))t[1]="Symbol";else if(w(e))t[1]="Function";else if(Array.isArray(e))t[1]="Array";else if(E(e))t[1]="Error";else if(j(e))t[1]="Plain";else{if(typeof e==="object"){if(e.nodeType===3)t[1]="Text";else if(e.nodeType===1||e.nodeType===9||e.nodeType===11)t[1]="Element";else if(e.nodeType===2)t[1]="Attribute";else if(e.nodeType===8)t[1]="Comment"}}return t}var T=function(e,t){return t!==null&&typeof t==="object"&&e.indexOf(t.nodeType)>-1&&!j(t)};var A=function(e){return e===undefined};var N=function(e){return e===null};var O=y;var S=b;var P=g;var M=m;var C=w;var F=function(e){return Array.isArray(e)};var k=E;var L=j;var H=function(e){return T([1,9,11],e)};var B=function(e){return T([2],e)};var D=function(e){return T([3],e)};var q=function(e){return T([8],e)};var V={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};var W={stopPropagation:function(e){e=e||window.event;if(e.stopPropagation){e.stopPropagation()}else{e.cancelBubble=true}},preventDefault:function(e){e=e||window.event;if(e.preventDefault){e.preventDefault()}else{e.returnValue=false}},isNode:function(e){return e&&(e.nodeType===1||e.nodeType===9||e.nodeType===11)},bind:function(e,t,n){if(e.constructor===Array||e.constructor===NodeList){for(var r=0;r<e.length;r++){this.bind(e[r],t,n)}return}if(window.attachEvent)e.attachEvent("on"+t,n);else e.addEventListener(t,n,false)},unbind:function(e,t,n){if(e.constructor===Array||e.constructor===NodeList){for(var r=0;r<e.length;r++){this.unbind(e[r],t,n)}return}if(window.detachEvent)e.detachEvent("on"+t,n);else e.removeEventListener(t,n,false)},find:function(e,t,n){if(!this.isNode(e))return[];var r=e.getElementsByTagName(n||"*");var o=[];for(var i=0;i<r.length;i++){if(this.isNode(r[i])&&(typeof t!="function"||t(r[i])))o.push(r[i])}return o},children:function(e,t){var n=e.childNodes;var r=[];for(var o=0;o<n.length;o++){if(this.isNode(n[o])&&(typeof t!="function"||t(n[o])))r.push(n[o])}return r},hasClass:function(e,t,n){if(t.constructor!==Array)t=[t];var r=" "+(e.getAttribute("class")||"")+" ";for(var o=0;o<t.length;o++){if(r.indexOf(" "+t[o]+" ")>=0){if(n)return true}else{if(!n)return false}}return true},removeClass:function(e,t){var n=" "+(e.getAttribute("class")||"")+" ";var r=n.replace(" "+t.trim()+" "," ");e.setAttribute("class",r.trim())},addClass:function(e,t){if(this.hasClass(e,t))return;var n=e.getAttribute("class")||"";e.setAttribute("class",n+" "+t)},toNode:function(e,t){var n;if(t)n=document.createElementNS(V.svg,"svg");else n=document.createElement("div");n.innerHTML=e;var r=n.childNodes;for(var o=0;o<r.length;o++){if(this.isNode(r[o]))return r[o]}},trigger:function(e,t){if(document.createEventObject){e.fireEvent("on"+t,document.createEventObject())}else{var n=document.createEvent("HTMLEvents");n.initEvent(t,true,false);e.dispatchEvent(n)}},getStyle:function(e,t){var n=document.defaultView&&document.defaultView.getComputedStyle?document.defaultView.getComputedStyle(e,null):e.currentStyle;return typeof t==="string"?n.getPropertyValue(t):n},offsetPosition:function(e){var t=0;var n=0;n=e.offsetTop;t=e.offsetLeft;e=e.offsetParent;while(e){n+=e.offsetTop;t+=e.offsetLeft;e=e.offsetParent}return{left:t,top:n}},mousePosition:function(e,t){var n=e.getBoundingClientRect();if(!t||!t.clientX)throw new Error("Event is necessary!");return{x:t.clientX-n.left,y:t.clientY-n.top}},remove:function(e){e.parentNode.removeChild(e)},setStyles:function(e,t){for(var n in t)e.style[n]=t[n]},size:function(e,t){var n,r;if(t=="content"){r=e.clientWidth-(this.getStyle(e,"padding-left")+"").replace("px","")-(this.getStyle(e,"padding-right")+"").replace("px","");n=e.clientHeight-(this.getStyle(e,"padding-top")+"").replace("px","")-(this.getStyle(e,"padding-bottom")+"").replace("px","")}else if(t=="padding"){r=e.clientWidth;n=e.clientHeight}else if(t=="border"){r=e.offsetWidth;n=e.offsetHeight}else if(t=="scroll"){r=e.scrollWidth;n=e.scrollHeight}else{r=e.offsetWidth;n=e.offsetHeight}return{width:r,height:n}}};var I={animation:e,Matrix4:t,Hermite:r,getType:x,isUndefined:A,isNull:N,isBoolean:O,isNumber:S,isString:P,isSymbol:M,isFunction:C,isArray:F,isError:k,isPlainObject:L,isElement:H,isAttribute:B,isText:D,isComment:q,xhtml:W};if(typeof module==="object"&&typeof module.exports==="object"){module.exports=I}else{window.tool=I}})();